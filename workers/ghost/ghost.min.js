/**
 * S.S.I. SHADOW - Ghost Script v3.0.0 (Minified)
 * @license MIT
 */
!function(w,d){"use strict";var C={endpoint:w.SSI_ENDPOINT||"https://ssi-shadow.workers.dev/api/collect",cookieDomain:w.SSI_COOKIE_DOMAIN||"",debug:w.SSI_DEBUG||!1,enableFingerprint:w.SSI_ENABLE_FINGERPRINT!==!1,lazyHydration:w.SSI_LAZY_HYDRATION!==!1,trackBehavior:w.SSI_TRACK_BEHAVIOR!==!1,hydrationDelay:5e3,scrollThreshold:10,spaMode:w.SSI_SPA_MODE||!1},S={hydrated:!1,pageLoadTime:Date.now(),scrollDepth:0,maxScrollDepth:0,clickCount:0,lastActivity:Date.now(),currentUrl:w.location.href,pageviews:0};function u(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0;return("x"===c?r:3&r|8).toString(16)})}function gc(n){var m=d.cookie.match(new RegExp("(^| )"+n+"=([^;]+)"));return m?decodeURIComponent(m[2]):null}function sc(n,v,days,dom){var e="";if(days){var dt=new Date;dt.setTime(dt.getTime()+864e5*days),e="; expires="+dt.toUTCString()}d.cookie=n+"="+encodeURIComponent(v)+e+(dom?"; domain="+dom:"")+"; path=/; SameSite=Lax"}function gp(n){try{return new URL(w.location.href).searchParams.get(n)}catch(e){return null}}function log(m,dt){C.debug&&console.log("[SSI]",m,dt||"")}function h(s){for(var h=5381,i=0;i<s.length;i++)h=(h<<5)+h+s.charCodeAt(i);return(h>>>0).toString(16)}function th(fn,wt){var t=Date.now();return function(){Date.now()-t>wt&&(fn.apply(this,arguments),t=Date.now())}}function gSSI(){var id=gc("_ssi_id");return id||(id="ssi_"+u().replace(/-/g,""),sc("_ssi_id",id,365,C.cookieDomain)),id}function gSess(){var id=gc("_ssi_session"),st=gc("_ssi_session_start");return id&&st||(id="sess_"+u().replace(/-/g,""),st=Date.now().toString(),sc("_ssi_session_start",st,1/48,C.cookieDomain)),sc("_ssi_session",id,1/48,C.cookieDomain),id}function gSD(){var s=gc("_ssi_session_start");return s?Date.now()-parseInt(s,10):0}function capCI(){var ci={fbclid:gp("fbclid"),gclid:gp("gclid"),ttclid:gp("ttclid")};return ci.fbclid&&sc("_fbc","fb.1."+Date.now()+"."+ci.fbclid,90,C.cookieDomain),ci.gclid&&sc("_gcl_aw","GCL."+Date.now()+"."+ci.gclid,90,C.cookieDomain),ci.ttclid&&sc("_ttp",ci.ttclid,90,C.cookieDomain),ci}function gMC(){var fbc=gc("_fbc"),fbp=gc("_fbp");return fbp||(fbp="fb.1."+Date.now()+"."+Math.floor(1e10*Math.random()),sc("_fbp",fbp,365,C.cookieDomain)),{fbc:fbc,fbp:fbp}}function gCF(){try{var cv=d.createElement("canvas"),cx=cv.getContext("2d");return cv.width=200,cv.height=50,cx.textBaseline="top",cx.font="14px Arial",cx.fillStyle="#f60",cx.fillRect(0,0,100,50),cx.fillStyle="#069",cx.fillText("SSI.Shadow.v3",2,15),cx.fillStyle="rgba(102,204,0,0.7)",cx.fillText("FP",4,35),h(cv.toDataURL())}catch(e){return null}}function gWGL(){try{var cv=d.createElement("canvas"),gl=cv.getContext("webgl")||cv.getContext("experimental-webgl");if(!gl)return{vendor:null,renderer:null};var di=gl.getExtension("WEBGL_debug_renderer_info");return di?{vendor:gl.getParameter(di.UNMASKED_VENDOR_WEBGL),renderer:gl.getParameter(di.UNMASKED_RENDERER_WEBGL)}:{vendor:gl.getParameter(gl.VENDOR),renderer:gl.getParameter(gl.RENDERER)}}catch(e){return{vendor:null,renderer:null}}}function gPH(){try{for(var p=[],i=0;i<navigator.plugins.length;i++)p.push(navigator.plugins[i].name);return p.length?h(p.sort().join(",")):null}catch(e){return null}}var cFP=null;function cF(){if(!C.enableFingerprint)return{};if(cFP)return cFP;var wgl=gWGL();return cFP={canvas_hash:gCF(),webgl_vendor:wgl.vendor,webgl_renderer:wgl.renderer,plugins_hash:gPH(),touch_support:"ontouchstart"in w||navigator.maxTouchPoints>0,device_pixel_ratio:w.devicePixelRatio||1,color_depth:screen.colorDepth||24,hardware_concurrency:navigator.hardwareConcurrency||null,device_memory:navigator.deviceMemory||null}}function cSD(){var wh=w.innerHeight,dh=Math.max(d.body.scrollHeight,d.body.offsetHeight,d.documentElement.scrollHeight,d.documentElement.offsetHeight),st=w.pageYOffset||d.documentElement.scrollTop;return dh<=wh?100:Math.min(Math.round((st+wh)/dh*100),100)}function gTP(){return Date.now()-S.pageLoadTime}function gBD(){return C.trackBehavior?{scroll_depth:S.maxScrollDepth,time_on_page:gTP(),clicks:S.clickCount,session_duration:gSD(),session_pageviews:S.pageviews}:{}}function bP(en,ed,ia){var ci=capCI(),mc=gMC(),p={ssi_id:gSSI(),session_id:gSess(),event_name:en,event_id:u(),timestamp:Date.now(),fbclid:ci.fbclid||gp("fbclid"),gclid:ci.gclid||gp("gclid"),ttclid:ci.ttclid||gp("ttclid"),fbc:mc.fbc,fbp:mc.fbp,url:w.location.href,referrer:d.referrer||null,title:d.title,user_agent:navigator.userAgent,language:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,screen_width:screen.width,screen_height:screen.height,viewport_width:w.innerWidth,viewport_height:w.innerHeight};if(ia||S.hydrated){var fp=cF(),bd=gBD();p.canvas_hash=fp.canvas_hash,p.webgl_vendor=fp.webgl_vendor,p.webgl_renderer=fp.webgl_renderer,p.plugins_hash=fp.plugins_hash,p.touch_support=fp.touch_support,p.scroll_depth=bd.scroll_depth,p.time_on_page=bd.time_on_page,p.clicks=bd.clicks,p.session_duration=bd.session_duration,p.session_pageviews=bd.session_pageviews}if(ed)for(var k in ed)ed.hasOwnProperty(k)&&(p[k]=ed[k]);return p}function sE(en,ed,ia){try{var p=bP(en,ed,ia),j=JSON.stringify(p);return log("Send:",en),navigator.sendBeacon?navigator.sendBeacon(C.endpoint,new Blob([j],{type:"application/json"})):fetch(C.endpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:j,keepalive:!0}),p.event_id}catch(e){return log("Err:",e),null}}function hy(){S.hydrated||(S.hydrated=!0,log("Hydrated"),cF(),C.trackBehavior&&sBT())}function cHT(){S.hydrated||(S.scrollDepth>=C.scrollThreshold||S.clickCount>0)&&hy()}function sLH(){if(!C.lazyHydration)return void hy();setTimeout(function(){S.hydrated||hy()},C.hydrationDelay);var hs=th(function(){S.scrollDepth=cSD(),S.scrollDepth>S.maxScrollDepth&&(S.maxScrollDepth=S.scrollDepth),cHT()},100);w.addEventListener("scroll",hs,{passive:!0}),d.addEventListener("click",function(){S.clickCount++,S.lastActivity=Date.now(),cHT()},{passive:!0}),d.addEventListener("touchstart",function(){cHT()},{passive:!0,once:!0})}function sBT(){var ts=th(function(){S.scrollDepth=cSD(),S.scrollDepth>S.maxScrollDepth&&(S.maxScrollDepth=S.scrollDepth)},250);w.addEventListener("scroll",ts,{passive:!0}),d.addEventListener("visibilitychange",function(){"hidden"===d.visibilityState&&sEP()}),w.addEventListener("beforeunload",function(){sEP()})}function sEP(){gTP()>=1e3&&sE("Engagement",{scroll_depth:S.maxScrollDepth,time_on_page:gTP(),clicks:S.clickCount},!0)}function sSPA(){if(C.spaMode){var oPS=history.pushState,oRS=history.replaceState;history.pushState=function(){oPS.apply(this,arguments),hN()},history.replaceState=function(){oRS.apply(this,arguments),hN()},w.addEventListener("popstate",hN),new MutationObserver(th(function(){w.location.href!==S.currentUrl&&hN()},500)).observe(d.body,{childList:!0,subtree:!0})}}function hN(){w.location.href!==S.currentUrl&&(log("Nav:",w.location.href),sEP(),S.currentUrl=w.location.href,S.pageLoadTime=Date.now(),S.scrollDepth=0,S.maxScrollDepth=0,S.clickCount=0,S.pageviews++,sE("PageView"))}w.SSI={pageview:function(){return S.pageviews++,sE("PageView")},track:function(en,ed){return sE(en,ed,!0)},purchase:function(v,c,oi,ci,ex){var dt={value:v,currency:c||"BRL",order_id:oi,content_ids:ci};if(ex)for(var k in ex)ex.hasOwnProperty(k)&&(dt[k]=ex[k]);return sE("Purchase",dt,!0)},lead:function(e,p,v,ex){var dt={email:e,phone:p,value:v};if(ex)for(var k in ex)ex.hasOwnProperty(k)&&(dt[k]=ex[k]);return sE("Lead",dt,!0)},addToCart:function(ci,v,c,cn){return sE("AddToCart",{content_ids:ci,value:v,currency:c||"BRL",content_name:cn},!0)},viewContent:function(ci,cn,v,cc){return sE("ViewContent",{content_ids:ci,content_name:cn,value:v,content_category:cc},!0)},initiateCheckout:function(ci,v,c,ni){return sE("InitiateCheckout",{content_ids:ci,value:v,currency:c||"BRL",num_items:ni},!0)},completeRegistration:function(e,p,m){return sE("CompleteRegistration",{email:e,phone:p,registration_method:m},!0)},search:function(ss,ci){return sE("Search",{search_string:ss,content_ids:ci},!0)},identify:function(e,p,ei,ex){var dt={email:e,phone:p,external_id:ei};if(ex)for(var k in ex)ex.hasOwnProperty(k)&&(dt[k]=ex[k]);return sE("Identify",dt,!0)},getSSIId:gSSI,getSessionId:gSess,getFingerprint:cF,getBehavior:function(){return{scroll_depth:S.maxScrollDepth,time_on_page:gTP(),clicks:S.clickCount,hydrated:S.hydrated}},isHydrated:function(){return S.hydrated},hydrate:hy,config:function(o){for(var k in o)o.hasOwnProperty(k)&&C.hasOwnProperty(k)&&(C[k]=o[k])},trackNavigation:hN,debug:function(e){return C.debug=!1!==e,C.debug},version:"3.0.0"},capCI(),gMC(),sLH(),sSPA(),w.SSI_NO_AUTO_PAGEVIEW||("complete"===d.readyState?(S.pageviews++,sE("PageView")):w.addEventListener("load",function(){S.pageviews++,sE("PageView")})),log("Ghost v3 ready")}(window,document);
