/**
 * S.S.I. SHADOW Ghost v3.0.0
 * @license MIT
 */
!function(w,d){var C={e:w.SSI_ENDPOINT||"https://ssi-shadow.workers.dev/api/collect",d:w.SSI_COOKIE_DOMAIN||"",b:w.SSI_DEBUG||0},S={h:0,t:Date.now(),s:0,c:0};function u(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0;return(c=="x"?r:r&3|8).toString(16)})}function gc(n){var m=d.cookie.match(new RegExp("(^| )"+n+"=([^;]+)"));return m?decodeURIComponent(m[2]):null}function sc(n,v,y){var e=new Date;e.setTime(e.getTime()+864e5*y);d.cookie=n+"="+encodeURIComponent(v)+";expires="+e.toUTCString()+(C.d?";domain="+C.d:"")+";path=/;SameSite=Lax"}function gp(n){try{return new URL(w.location.href).searchParams.get(n)}catch(e){return null}}function h(s){for(var h=5381,i=0;i<s.length;i++)h=(h<<5)+h+s.charCodeAt(i);return(h>>>0).toString(16)}function id(){var i=gc("_ssi");return i||(i="ssi_"+u().replace(/-/g,""),sc("_ssi",i,365)),i}function sid(){var i=gc("_ssid");return i||(i="s_"+u().replace(/-/g,"")),sc("_ssid",i,.02),i}function ci(){var f=gp("fbclid"),g=gp("gclid"),t=gp("ttclid");f&&sc("_fbc","fb.1."+Date.now()+"."+f,90);g&&sc("_gcl","GCL."+Date.now()+"."+g,90);t&&sc("_ttp",t,90);return{f:f,g:g,t:t}}function mc(){var c=gc("_fbc"),p=gc("_fbp");p||(p="fb.1."+Date.now()+"."+~~(1e10*Math.random()),sc("_fbp",p,365));return{c:c,p:p}}function fp(){try{var cv=d.createElement("canvas"),cx=cv.getContext("2d");cv.width=200;cv.height=50;cx.font="14px Arial";cx.fillText("SSI",2,15);return h(cv.toDataURL())}catch(e){return null}}function wgl(){try{var cv=d.createElement("canvas"),gl=cv.getContext("webgl");if(!gl)return{v:null,r:null};var di=gl.getExtension("WEBGL_debug_renderer_info");return di?{v:gl.getParameter(di.UNMASKED_VENDOR_WEBGL),r:gl.getParameter(di.UNMASKED_RENDERER_WEBGL)}:{v:null,r:null}}catch(e){return{v:null,r:null}}}function sd(){var wh=w.innerHeight,dh=Math.max(d.body.scrollHeight,d.documentElement.scrollHeight),st=w.pageYOffset||0;return dh<=wh?100:Math.min(~~((st+wh)/dh*100),100)}function bp(n,dt){var ck=ci(),m=mc(),wg=S.h?wgl():{v:null,r:null};var p={ssi_id:id(),session_id:sid(),event_name:n,event_id:u(),timestamp:Date.now(),fbclid:ck.f,gclid:ck.g,ttclid:ck.t,fbc:m.c,fbp:m.p,url:w.location.href,referrer:d.referrer,title:d.title,user_agent:navigator.userAgent,language:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,screen_width:screen.width,screen_height:screen.height,viewport_width:w.innerWidth,viewport_height:w.innerHeight};if(S.h){p.canvas_hash=fp();p.webgl_vendor=wg.v;p.webgl_renderer=wg.r;p.touch_support="ontouchstart"in w;p.scroll_depth=S.s;p.time_on_page=Date.now()-S.t;p.clicks=S.c}if(dt)for(var k in dt)p[k]=dt[k];return p}function se(n,dt){try{var p=bp(n,dt),j=JSON.stringify(p);C.b&&console.log("[SSI]",n,p);navigator.sendBeacon?navigator.sendBeacon(C.e,new Blob([j],{type:"application/json"})):fetch(C.e,{method:"POST",headers:{"Content-Type":"application/json"},body:j,keepalive:1});return p.event_id}catch(e){return null}}function hy(){if(S.h)return;S.h=1;C.b&&console.log("[SSI] Hydrated")}ci();mc();setTimeout(hy,5e3);w.addEventListener("scroll",function(){S.s=sd();S.s>10&&hy()},{passive:1});d.addEventListener("click",function(){S.c++;hy()},{passive:1});w.SSI={pageview:function(){return se("PageView")},track:function(n,dt){return se(n,dt)},purchase:function(v,c,o,i){return se("Purchase",{value:v,currency:c||"BRL",order_id:o,content_ids:i})},lead:function(e,p,v){return se("Lead",{email:e,phone:p,value:v})},addToCart:function(i,v,c){return se("AddToCart",{content_ids:i,value:v,currency:c||"BRL"})},viewContent:function(i,n,v){return se("ViewContent",{content_ids:i,content_name:n,value:v})},initiateCheckout:function(i,v,c){return se("InitiateCheckout",{content_ids:i,value:v,currency:c||"BRL"})},completeRegistration:function(e,p){return se("CompleteRegistration",{email:e,phone:p})},identify:function(e,p,x){return se("Identify",{email:e,phone:p,external_id:x})},getSSIId:id,getSessionId:sid,hydrate:hy,config:function(o){if(o.endpoint)C.e=o.endpoint;if(o.cookieDomain)C.d=o.cookieDomain;if(o.debug!==undefined)C.b=o.debug},version:"3.0.0"};w.SSI_NO_AUTO_PAGEVIEW||("complete"===d.readyState?se("PageView"):w.addEventListener("load",function(){se("PageView")}))}(window,document);
